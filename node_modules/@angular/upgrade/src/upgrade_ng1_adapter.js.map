{"version":3,"file":"upgrade_ng1_adapter.js","sourceRoot":"","sources":["../../../../modules/@angular/upgrade/src/upgrade_ng1_adapter.ts"],"names":[],"mappings":"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","sourcesContent":["interface DecoratorInvocation {\n    type: Function;\n    args?: any[];\n  }\n  import {\n  Directive,\n  DoCheck,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  OnInit,\n  OnChanges,\n  SimpleChange,\n  Type\n} from '@angular/core';\nimport {\n  NG1_COMPILE,\n  NG1_SCOPE,\n  NG1_HTTP_BACKEND,\n  NG1_TEMPLATE_CACHE,\n  NG1_CONTROLLER\n} from './constants';\nimport {controllerKey} from './util';\nimport * as angular from './angular_js';\n\nconst CAMEL_CASE = /([A-Z])/g;\nconst INITIAL_VALUE = {\n  __UNINITIALIZED__: true\n};\nconst NOT_SUPPORTED: any = 'NOT_SUPPORTED';\n\n\nexport class UpgradeNg1ComponentAdapterBuilder {\n  type: Type;\n  inputs: string[] = [];\n  inputsRename: string[] = [];\n  outputs: string[] = [];\n  outputsRename: string[] = [];\n  propertyOutputs: string[] = [];\n  checkProperties: string[] = [];\n  propertyMap: {[name: string]: string} = {};\n  linkFn: angular.ILinkFn = null;\n  directive: angular.IDirective = null;\n  $controller: angular.IControllerService = null;\n\n  constructor(public name: string) {\n    var selector = name.replace(CAMEL_CASE, (all, next: string) => '-' + next.toLowerCase());\n    var self = this;\n    this.type =\n        Directive({selector: selector, inputs: this.inputsRename, outputs: this.outputsRename})\n            .Class({\n              constructor: [\n                new Inject(NG1_SCOPE),\n                ElementRef,\n                function(scope: angular.IScope, elementRef: ElementRef) {\n                  return new UpgradeNg1ComponentAdapter(\n                      self.linkFn, scope, self.directive, elementRef, self.$controller, self.inputs,\n                      self.outputs, self.propertyOutputs, self.checkProperties, self.propertyMap);\n                }\n              ],\n              ngOnInit: function() { /* needs to be here for ng2 to properly detect it */ },\n              ngOnChanges: function() { /* needs to be here for ng2 to properly detect it */ },\n              ngDoCheck: function() { /* needs to be here for ng2 to properly detect it */ }\n            });\n  }\n\n  extractDirective(injector: angular.IInjectorService): angular.IDirective {\n    var directives: angular.IDirective[] = injector.get(this.name + 'Directive');\n    if (directives.length > 1) {\n      throw new Error('Only support single directive definition for: ' + this.name);\n    }\n    var directive = directives[0];\n    if (directive.replace) this.notSupported('replace');\n    if (directive.terminal) this.notSupported('terminal');\n    var link = directive.link;\n    if (typeof link == 'object') {\n      if ((<angular.IDirectivePrePost>link).post) this.notSupported('link.post');\n    }\n    return directive;\n  }\n\n  private notSupported(feature: string) {\n    throw new Error(`Upgraded directive '${this.name}' does not support '${feature}'.`);\n  }\n\n  extractBindings() {\n    var btcIsObject = typeof this.directive.bindToController === 'object';\n    if (btcIsObject && Object.keys(this.directive.scope).length) {\n      throw new Error(\n          `Binding definitions on scope and controller at the same time are not supported.`);\n    }\n\n    var context = (btcIsObject) ? this.directive.bindToController : this.directive.scope;\n\n    if (typeof context == 'object') {\n      for (var name in context) {\n        if ((<any>context).hasOwnProperty(name)) {\n          var localName = context[name];\n          var type = localName.charAt(0);\n          localName = localName.substr(1) || name;\n          var outputName = 'output_' + name;\n          var outputNameRename = outputName + ': ' + name;\n          var outputNameRenameChange = outputName + ': ' + name + 'Change';\n          var inputName = 'input_' + name;\n          var inputNameRename = inputName + ': ' + name;\n          switch (type) {\n            case '=':\n              this.propertyOutputs.push(outputName);\n              this.checkProperties.push(localName);\n              this.outputs.push(outputName);\n              this.outputsRename.push(outputNameRenameChange);\n              this.propertyMap[outputName] = localName;\n            // don't break; let it fall through to '@'\n            case '@':\n            // handle the '<' binding of angular 1.5 components\n            case '<':\n              this.inputs.push(inputName);\n              this.inputsRename.push(inputNameRename);\n              this.propertyMap[inputName] = localName;\n              break;\n            case '&':\n              this.outputs.push(outputName);\n              this.outputsRename.push(outputNameRename);\n              this.propertyMap[outputName] = localName;\n              break;\n            default:\n              var json = JSON.stringify(context);\n              throw new Error(\n                  `Unexpected mapping '${type}' in '${json}' in '${this.name}' directive.`);\n          }\n        }\n      }\n    }\n  }\n\n  compileTemplate(compile: angular.ICompileService, templateCache: angular.ITemplateCacheService,\n                  httpBackend: angular.IHttpBackendService): Promise<any> {\n    if (this.directive.template !== undefined) {\n      this.linkFn = compileHtml(this.directive.template);\n    } else if (this.directive.templateUrl) {\n      var url = this.directive.templateUrl;\n      var html = templateCache.get(url);\n      if (html !== undefined) {\n        this.linkFn = compileHtml(html);\n      } else {\n        return new Promise((resolve, err) => {\n          httpBackend('GET', url, null, (status, response) => {\n            if (status == 200) {\n              resolve(this.linkFn = compileHtml(templateCache.put(url, response)));\n            } else {\n              err(`GET ${url} returned ${status}: ${response}`);\n            }\n          });\n        });\n      }\n    } else {\n      throw new Error(`Directive '${this.name}' is not a component, it is missing template.`);\n    }\n    return null;\n    function compileHtml(html): angular.ILinkFn {\n      var div = document.createElement('div');\n      div.innerHTML = html;\n      return compile(div.childNodes);\n    }\n  }\n\n  static resolve(exportedComponents: {[name: string]: UpgradeNg1ComponentAdapterBuilder},\n                 injector: angular.IInjectorService): Promise<any> {\n    var promises = [];\n    var compile: angular.ICompileService = injector.get(NG1_COMPILE);\n    var templateCache: angular.ITemplateCacheService = injector.get(NG1_TEMPLATE_CACHE);\n    var httpBackend: angular.IHttpBackendService = injector.get(NG1_HTTP_BACKEND);\n    var $controller: angular.IControllerService = injector.get(NG1_CONTROLLER);\n    for (var name in exportedComponents) {\n      if ((<any>exportedComponents).hasOwnProperty(name)) {\n        var exportedComponent = exportedComponents[name];\n        exportedComponent.directive = exportedComponent.extractDirective(injector);\n        exportedComponent.$controller = $controller;\n        exportedComponent.extractBindings();\n        var promise = exportedComponent.compileTemplate(compile, templateCache, httpBackend);\n        if (promise) promises.push(promise);\n      }\n    }\n    return Promise.all(promises);\n  }\n}\n\nclass UpgradeNg1ComponentAdapter implements OnInit, OnChanges, DoCheck {\n  destinationObj: any = null;\n  checkLastValues: any[] = [];\n  componentScope: angular.IScope;\n  element: Element;\n\n  constructor(private linkFn: angular.ILinkFn, scope: angular.IScope,\n              private directive: angular.IDirective, elementRef: ElementRef,\n              $controller: angular.IControllerService, private inputs: string[],\n              private outputs: string[], private propOuts: string[],\n              private checkProperties: string[], private propertyMap: {[key: string]: string}) {\n    this.element = elementRef.nativeElement;\n    this.componentScope = scope.$new(!!directive.scope);\n    var $element = angular.element(this.element);\n    var controllerType = directive.controller;\n    var controller: any = null;\n    if (controllerType) {\n      var locals = {$scope: this.componentScope, $element: $element};\n      controller = $controller(controllerType, locals, null, directive.controllerAs);\n      $element.data(controllerKey(directive.name), controller);\n    }\n    var link = directive.link;\n    if (typeof link == 'object') link = (<angular.IDirectivePrePost>link).pre;\n    if (link) {\n      var attrs: angular.IAttributes = NOT_SUPPORTED;\n      var transcludeFn: angular.ITranscludeFunction = NOT_SUPPORTED;\n      var linkController = this.resolveRequired($element, directive.require);\n      (<angular.IDirectiveLinkFn>directive.link)(this.componentScope, $element, attrs,\n                                                 linkController, transcludeFn);\n    }\n    this.destinationObj =\n        directive.bindToController && controller ? controller : this.componentScope;\n\n    for (var i = 0; i < inputs.length; i++) {\n      this[inputs[i]] = null;\n    }\n    for (var j = 0; j < outputs.length; j++) {\n      var emitter = this[outputs[j]] = new EventEmitter();\n      this.setComponentProperty(outputs[j], ((emitter) => (value) => emitter.emit(value))(emitter));\n    }\n    for (var k = 0; k < propOuts.length; k++) {\n      this[propOuts[k]] = new EventEmitter();\n      this.checkLastValues.push(INITIAL_VALUE);\n    }\n  }\n\n  ngOnInit() {\n    var childNodes: Node[] = [];\n    var childNode;\n    while (childNode = this.element.firstChild) {\n      this.element.removeChild(childNode);\n      childNodes.push(childNode);\n    }\n    this.linkFn(this.componentScope, (clonedElement: Node[], scope: angular.IScope) => {\n      for (var i = 0, ii = clonedElement.length; i < ii; i++) {\n        this.element.appendChild(clonedElement[i]);\n      }\n    }, {parentBoundTranscludeFn: (scope, cloneAttach) => { cloneAttach(childNodes); }});\n    if (this.destinationObj.$onInit) {\n      this.destinationObj.$onInit();\n    }\n  }\n\n  ngOnChanges(changes: {[name: string]: SimpleChange}) {\n    for (var name in changes) {\n      if ((<Object>changes).hasOwnProperty(name)) {\n        var change: SimpleChange = changes[name];\n        this.setComponentProperty(name, change.currentValue);\n      }\n    }\n  }\n\n  ngDoCheck(): number {\n    var count = 0;\n    var destinationObj = this.destinationObj;\n    var lastValues = this.checkLastValues;\n    var checkProperties = this.checkProperties;\n    for (var i = 0; i < checkProperties.length; i++) {\n      var value = destinationObj[checkProperties[i]];\n      var last = lastValues[i];\n      if (value !== last) {\n        if (typeof value == 'number' && isNaN(value) && typeof last == 'number' && isNaN(last)) {\n          // ignore because NaN != NaN\n        } else {\n          var eventEmitter: EventEmitter<any> = this[this.propOuts[i]];\n          eventEmitter.emit(lastValues[i] = value);\n        }\n      }\n    }\n    return count;\n  }\n\n  setComponentProperty(name: string, value: any) {\n    this.destinationObj[this.propertyMap[name]] = value;\n  }\n\n  private resolveRequired($element: angular.IAugmentedJQuery, require: string | string[]): any {\n    if (!require) {\n      return undefined;\n    } else if (typeof require == 'string') {\n      var name: string = <string>require;\n      var isOptional = false;\n      var startParent = false;\n      var searchParents = false;\n      var ch: string;\n      if (name.charAt(0) == '?') {\n        isOptional = true;\n        name = name.substr(1);\n      }\n      if (name.charAt(0) == '^') {\n        searchParents = true;\n        name = name.substr(1);\n      }\n      if (name.charAt(0) == '^') {\n        startParent = true;\n        name = name.substr(1);\n      }\n\n      var key = controllerKey(name);\n      if (startParent) $element = $element.parent();\n      var dep = searchParents ? $element.inheritedData(key) : $element.data(key);\n      if (!dep && !isOptional) {\n        throw new Error(`Can not locate '${require}' in '${this.directive.name}'.`);\n      }\n      return dep;\n    } else if (require instanceof Array) {\n      var deps = [];\n      for (var i = 0; i < require.length; i++) {\n        deps.push(this.resolveRequired($element, require[i]));\n      }\n      return deps;\n    }\n    throw new Error(\n        `Directive '${this.directive.name}' require syntax unrecognized: ${this.directive.require}`);\n  }\n}\n"]}